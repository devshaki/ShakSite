<div class="admin-content">
  <h2>× ×™×”×•×œ ××‘×—× ×™× ×•××˜×œ×•×ª</h2>

  <div class="content-grid">
    <!-- Exams Section -->
    <div class="section exams-section">
      <div class="section-title">
        <span class="section-icon"></span>
        <h3>××‘×—× ×™×</h3>
      </div>
      
      <!-- Exam Form using Form Builder -->
      <app-form-builder
        [config]="examFormConfig()"
        (formSubmit)="handleExamSubmit($event)"
      />

      <!-- Exams List -->
      <div class="items-section">
        <div class="section-header">
          <h4>ğŸ“‹ ×¨×©×™××ª ××‘×—× ×™×</h4>
          <div class="search-group">
            <input
              type="text"
              [(ngModel)]="examSearchTerm"
              placeholder="×—×™×¤×•×© ××‘×—× ×™×..."
              class="search-input"
            />
          </div>
        </div>

        @if (getFilteredExams().length === 0) {
          <p class="empty-message">××™×Ÿ ××‘×—× ×™× ×œ×”×¦×’×”</p>
        } @else {
          <div class="items-list">
            @for (exam of getFilteredExams(); track exam.id) {
              <div class="item">
                <div class="item-content">
                  <h5>{{ exam.subject }}</h5>
                  <div class="item-details">
                    <span>ğŸ“… {{ exam.date }}</span>
                    @if (exam.time) {
                      <span>â° {{ exam.time }}</span>
                    }
                    @if (exam.room) {
                      <span>ğŸ“ {{ exam.room }}</span>
                    }
                  </div>
                  @if (exam.notes) {
                    <p class="item-notes">{{ exam.notes }}</p>
                  }
                </div>
                <div class="item-actions">
                  <button class="edit-btn" (click)="editExam(exam)">âœï¸</button>
                  <button class="delete-btn" (click)="deleteExam(exam.id)">ğŸ—‘ï¸</button>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>

    <!-- Tasks Section -->
    <div class="section tasks-section">
      <div class="section-title">
        <span class="section-icon"></span>
        <h3>××˜×œ×•×ª</h3>
      </div>
      
      <!-- Task Form using Form Builder -->
      <app-form-builder
        [config]="taskFormConfig()"
        (formSubmit)="handleTaskSubmit($event)"
      />

      <!-- Tasks List -->
      <div class="items-section">
        <div class="section-header">
          <h4>ğŸ“‹ ×¨×©×™××ª ××˜×œ×•×ª</h4>
          <div class="filters">
            <div class="search-group">
              <input
                type="text"
                [(ngModel)]="taskSearchTerm"
                placeholder="×—×™×¤×•×© ××˜×œ×•×ª..."
                class="search-input"
              />
            </div>
            <div class="filter-group">
              <label>×¡×™× ×•×Ÿ:</label>
              <select [(ngModel)]="taskFilterStatus" class="filter-select">
                <option value="all">×”×›×œ</option>
                <option value="incomplete">×œ× ×”×•×©×œ××•</option>
                <option value="completed">×”×•×©×œ××•</option>
              </select>
            </div>
          </div>
        </div>

        @if (getFilteredTasks().length === 0) {
          <p class="empty-message">××™×Ÿ ××˜×œ×•×ª ×œ×”×¦×’×”</p>
        } @else {
          <div class="items-list">
            @for (task of getFilteredTasks(); track task.id) {
              <div class="item" [class.completed]="task.completed">
                <div class="item-checkbox">
                  <input
                    type="checkbox"
                    [checked]="task.completed"
                    (change)="toggleTaskCompletion(task.id)"
                  />
                </div>
                <div class="item-content">
                  <h5>{{ task.title }}</h5>
                  <div class="item-details">
                    @if (task.dueDate) {
                      <span>ğŸ“… {{ task.dueDate }}</span>
                    }
                    @if (task.subject) {
                      <span>{{ task.subject }}</span>
                    }
                    @if (task.priority) {
                      <span class="priority-badge" [class]="'priority-' + task.priority">
                        {{ task.priority === 'high' ? 'ğŸ”´' : task.priority === 'medium' ? 'ğŸŸ¡' : 'ğŸŸ¢' }}
                        {{ task.priority === 'high' ? '×’×‘×•×”×”' : task.priority === 'medium' ? '×‘×™× ×•× ×™×ª' : '× ××•×›×”' }}
                      </span>
                    }
                  </div>
                  @if (task.description) {
                    <p class="item-description">{{ task.description }}</p>
                  }
                </div>
                <div class="item-actions">
                  <button class="edit-btn" (click)="editTask(task)">âœï¸</button>
                  <button class="delete-btn" (click)="deleteTask(task.id)">ğŸ—‘ï¸</button>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>
</div>
